# Crud
type Permission {
  # Crud
  id:        ID! @unique
  createdAt: DateTime!
  updatedAt: DateTime!
  createdBy: User! @relation(name: "PermissionCreator")
  updatedBy: User! @relation(name: "PermissionUpdater")
  display:   String!

  value: String! @unique
}

# Crud
type PermissionLevel {
  # Crud
  id:        ID! @unique
  createdAt: DateTime!
  updatedAt: DateTime!
  createdBy: User! @relation(name: "PermissionLevelCreator")
  updatedBy: User! @relation(name: "PermissionLevelUpdater")
  display:   String!

  children: [PermissionLevel!]! @relation(name: "PermissionLevelChildren")
  parents:  [PermissionLevel!]! @relation(name: "PermissionLevelParents")

  permissions: [Permission!]!
}

# Crud
type Role {
  # Crud
  id:        ID! @unique
  createdAt: DateTime!
  updatedAt: DateTime!
  createdBy: User! @relation(name: "RoleCreator")
  updatedBy: User! @relation(name: "RoleUpdater")
  display:   String! @unique

  permissionLevel: PermissionLevel!

  users: [User!]! @relation(name: "UserRoles")
}

# Managed
type Session {
  # Managed
  id:        ID! @unique
  createdAt: DateTime!
  updatedAt: DateTime!

  user:      User! @relation(name: "UserSessions")
  expiresAt: DateTime!
  ip:        String!
  ua:        String!
  token:     String!
}

# Managed
type User {
  # Managed
  id:        ID!  @unique
  createdAt: DateTime!
  updatedAt: DateTime!
  display:   String! @default(value: "Anonymous")

  roles:    [Role!]! @relation(name: "UserRoles")
  # entries:  [Entry!]! @relation(name: "UserEntries")
  sessions: [Session!]! @relation(name: "UserSessions")

  # Relations
  createdPermissions: [Permission!]! @relation(name: "PermissionCreator")
  updatedPermissions: [Permission!]! @relation(name: "PermissionUpdater")

  createdPermissionLevels: [PermissionLevel!]! @relation(name: "PermissionLevelCreator")
  updatedPermissionLevels: [PermissionLevel!]! @relation(name: "PermissionLevelUpdater")

  createdRoles: [Role!]! @relation(name: "RoleCreator")
  updatedRoles: [Role!]! @relation(name: "RoleUpdater")

  createdEntries:   [Entry!]! @relation(name: "EntryCreator")
  updatedEntries:   [Entry!]! @relation(name: "EntryUpdater")
  publishedEntries: [Entry!]! @relation(name: "EntryPublisher")

  createdSlugs: [Slug!]! @relation(name: "SlugCreator")
  updatedSlugs: [Slug!]! @relation(name: "SlugUpdater")

  createdCategories: [Category!]! @relation(name: "CategoryCreator")
  updatedCategories: [Category!]! @relation(name: "CategoryUpdater")
}
